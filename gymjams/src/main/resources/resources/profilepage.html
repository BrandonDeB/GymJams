<!DOCTYPE html>
<html lang ="en>

<head>
    <meta charset=UTF-8">
    <title>GYMJAM</title>

    <style>
        .backbtn{
            position:absolute;
            bottom:0;
        }

        .logbtn{
            position:absolute;
            bottom:0;
            margin-left: 200px;
        }

    </style>
</head>

<script>
//When the page is opened
document.addEventListener("DOMContentLoaded", async function() {
    try {
        const response = await fetch("http://localhost:8080/get-user-exercises");
        const exercises = await response.json();

        const userfetch = await fetch("http://localhost:8080/get-current-user");
        const user = await userfetch.text;

        //Pull Username from backend
        const usernameElement = document.getElementById("username");
        usernameElement.textContent = user;

        console.log(exercises);
        
        //Pull exercises from backend
        const exercisesList = document.getElementById("exercisesList");
        exercises.forEach(exercise => {
            exercisesList.innerHTML += `
                <li>
                    Exercise: ${exercise.name}, 
                    Weight: ${exercise.weight}, 
                    Reps: ${exercise.reps}, 
                    Sets: ${exercise.sets}, 
                    Date: ${exercise.date}, 
                    Playlist: ${exercise.playlistLink}
                </li>`;
        });
    } catch (error) {
        console.error("Error fetching exercises:", error);
    }
});

//log out
</script>

<body>
<div class = "wrapper">
    <img src="https://cdn-icons-png.freepik.com/256/552/552848.png">
<h3 id = "username"></h3>
<!--Should hopefully put out a usrename-->



<form action="http://localhost:8080/api/add-friend.html" target = _self type="GET">
<div class="addfriend">
    <input username ="username" type = "text" placeholder = "type friend's username" required>

        <button type="submit" >Add Friend</button>

    </div>
</form>

<form action="http://localhost:8080/api/remove-friend.html" target = _self type="GET">
    <div class="remfriend">
        <input username ="username" type = "text" placeholder = "type friend's username" required>
    
            <button type="submit" >Remove Friend</button>
    
        </div>
    </form>

    <h2>Previous Jam-Seshs</h2>

    <ul id="exercisesList">
        <!-- the exercises should pop out after this-->
    </ul>

    <div class="backbtn">
        <a href="scrollingpage.html">
            <button type="button" >Back to Scrolling</button></a>
        </div>
</div>

<div class="logbtn">
        <button type="button" onclick="logout()" >LogOut</button></a>
</div>

</body>
</html>