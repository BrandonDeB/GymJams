<!DOCTYPE html>
<html lang ="en>

<head>
    <meta charset=UTF-8">
    <title>GYMJAM</title>
</head>

<script>
//When the page is opened
document.addEventListener("DOMContentLoaded", async function() {
    try {
        const response = await fetch("http://localhost:8080/get-user-exercises");
        const exercises = await response.json();

        const userfetch = await fetch("http://localhost:8080/get-current-user");
        const user = await userfetch.text;

        //Pull Username from backend
        const usernameElement = document.getElementById("username");
        usernameElement.textContent = user;

        console.log(exercises);
        
        //Pull exercises from backend
        const exercisesList = document.getElementById("exercisesList");
        exercises.forEach(exercise => {
            exercisesList.innerHTML += `
                <li>
                    Exercise: ${exercise.name}, 
                    Weight: ${exercise.weight}, 
                    Reps: ${exercise.reps}, 
                    Sets: ${exercise.sets}, 
                    Date: ${exercise.date}, 
                    Playlist: ${exercise.playlistLink}
                </li>`;
        });
    } catch (error) {
        console.error("Error fetching exercises:", error);
    }
});
</script>

<body>
<div class = "wrapper">
    <img src="https://cdn-icons-png.freepik.com/256/552/552848.png">
<h3 id = "username"></h3>
<!--Should hopefully put out a usrename-->
    <h2>Previous Jam-Seshs</h2>

    <ul id="exercisesList">
        <!-- the exercises should pop out after this-->
    </ul>

</div>

</body>
</html>